apply plugin: 'java'
apply plugin: 'jacoco'
apply plugin: 'application'


description = 'Advanced IRC Robot'

mainClassName = 'jrobo.expectusafterlun.ch.JRobo'

repositories {
	mavenCentral()
}

dependencies {
	testImplementation     'junit:junit:4.13'
	implementation 'com.google.code.gson:gson:2.8.8'
}

jar {
	manifest {
		attributes(
			'Class-Path': configurations.compile.collect { it.getName() }.join(' '),
			'Main-Class': 'jrobo.expectusafterlun.ch.JRobo'
		)
	}
}

// https://stackoverflow.com/questions/55433883/how-to-enable-java-12-preview-features-with-gradle
tasks.withType(JavaCompile).each {
	it.options.compilerArgs.add('--enable-preview')
}

tasks.withType(JavaExec) {
	jvmArgs += '--enable-preview'
}

test {
	jvmArgs(['--enable-preview'])
	useJUnitPlatform()
}

